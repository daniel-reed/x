!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.x=t()}(this,function(){"use strict";!function(){function e(e){this.value=e}function t(t){function r(o,s){try{var u=t[o](s),a=u.value;a instanceof e?Promise.resolve(a.value).then(function(e){r("next",e)},function(e){r("throw",e)}):n(u.done?"return":"normal",u.value)}catch(e){n("throw",e)}}function n(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}(o=o.next)?r(o.key,o.arg):s=null}var o,s;this._invoke=function(e,t){return new Promise(function(n,u){var a={key:e,arg:t,resolve:n,reject:u,next:null};s?s=s.next=a:(o=s=a,r(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}();var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=function(){function r(){e(this,r)}return t(r,null,[{key:"new",value:function(e){var t=new n;return r.returnRequestOrPromise(t,e)}},{key:"text",value:function(e,t,o){var s=new n,u={type:"POST",url:e};Object.assign(u,t),s.open(u),r.setTextHeaders(s,u),r.setHeaders(s,u),r.setFunctionOverrides(s,u);var a=u.hasOwnProperty("data")?u.data:void 0;return s.send(a),r.returnRequestOrPromise(s,o)}},{key:"json",value:function(e,t,o){var s=new n,u={type:"POST",url:e,responseType:"json"};Object.assign(u,t),s.open(u),r.setJSONHeaders(s,u),r.setHeaders(s,u),r.setFunctionOverrides(s,u);var a=u.hasOwnProperty("data")?JSON.stringify(u.data):void 0;return s.send(a),r.returnRequestOrPromise(s,o)}},{key:"proto",value:function(e,t,o){var s=new n,u={type:"POST",url:e,responseType:"json"};Object.assign(u,t),s.open(u),r.setProtoHeaders(s,u),r.setHeaders(s,u),r.setFunctionOverrides(s,u),r.setProtoConvert(s,u);var a=void 0;return u.hasOwnProperty("data")&&u.data.hasOwnProperty("serializeBinary")&&(a=u.data.serializeBinary()),s.send(a),r.returnRequestOrPromise(s,o)}},{key:"setJSONHeaders",value:function(e,t){r.setXRequestedWithHeader(e,t),e.setHeader("Content-Type","application/json")}},{key:"setTextHeaders",value:function(e,t){r.setXRequestedWithHeader(e,t),e.setHeader("Content-Type","text/plain")}},{key:"setProtoHeaders",value:function(e,t){r.setXRequestedWithHeader(e,t),e.setHeader("Content-Type","application/octet-stream")}},{key:"setXRequestedWithHeader",value:function(e,t){t.hasOwnProperty("requestedWith")&&!t.requestedWith||e.setHeader("X-Requested-With","XMLHttpRequest")}},{key:"setHeaders",value:function(e,t){if(!t.hasOwnProperty("headers"))for(var r in t.headers)t.headers.hasOwnProperty(r)&&e.setHeader(r,t.headers[r])}},{key:"setFunctionOverrides",value:function(e,t){t.hasOwnProperty("convert")&&(e.convert=t.convert),t.hasOwnProperty("onSuccess")&&(e.onSuccess=t.onSuccess),t.hasOwnProperty("onError")&&(e.onError=t.onError),t.hasOwnProperty("onAbort")&&(e.onAbort=t.onAbort),t.hasOwnProperty("onTimeout")&&(e.onTimeout=t.onTimeout)}},{key:"setProtoConvert",value:function(e,t){t.hasOwnProperty("proto")&&(e.convert=r.buildProtoConvert(t.proto))}},{key:"isPending",value:function(e){return null!==e&&(void 0!==e&&(!!e.hasOwnProperty("isPending")&&e.isPending()))}},{key:"abort",value:function(e){if(null!==e&&void 0!==e&&e.hasOwnProperty("abort"))return e.abort()}},{key:"buildProtoConvert",value:function(e){return function(t,r){return e.deserializeBinary(t)}}},{key:"returnRequestOrPromise",value:function(e,t){return t?e.getPromise():e}}]),r}(),n=function t(){var r=this;e(this,t),this.open=function(e){if(!e.hasOwnProperty("url"))throw"Missing 'url' Parameter";var t=e.hasOwnProperty("type")?e.type:"GET";r.xhr.open(t,e.url),e.hasOwnProperty("responseType")&&(r.xhr.responseType=e.responseType),r.xhr.onreadystatechange=r.__handleReadyStateChange,e.hasOwnProperty("timeout")&&(r.xhr.timeout=e.timeout,r.xhr.ontimeout=r.__handleTimeout())},this.isPending=function(){switch(r.xhr.readyState){case 0:case 4:return!1;default:return!0}},this.setHeader=function(e,t){r.xhr.setRequestHeader(e,t)},this.getPromise=function(){return r.promise},this.getResponse=function(){return r.response},this.getError=function(){return r.error},this.getStatus=function(){return r.status},this.hasError=function(){return void 0!==r.error},this.send=function(e){return void 0===e?r.xhr.send():r.xhr.send(e)},this.abort=function(){if(4!==r.xhr.readyState&&0!==r.xhr.readyState)return r.xhr.abort()},this.__handleReadyStateChange=function(){switch(r.xhr.readyState){case XMLHttpRequest.DONE:return r.__handleDone()}},this.__handleDone=function(){return 200===r.xhr.status?r.__handleSuccess():0===r.xhr.status?r.__handleAborted():r.__handleError()},this.__handleSuccess=function(){switch(r.xhr.responseType){case"arraybuffer":var e=r.xhr.response;e?(r.response=r.convert(new Uint8Array(e)),r.status=r.xhr.status):(r.response=r.convert(new Uint8Array(0)),r.status=r.xhr.status),r.onSuccess(r.response,r);break;case"json":r.response=r.convert(r.xhr.response),r.status=r.xhr.status,r.onSuccess(r.response,r);break;default:r.response=r.convert(r.xhr.responseText),r.status=r.xhr.status,r.onSuccess(r.response,r)}},this.__handleError=function(){r.error=r.xhr.response,r.status=r.xhr.status,r.onError(r.xhr.response,r,r.xhr.status)},this.__handleAborted=function(){r.error="aborted",r.status=0,r.onAbort(r)},this.__handleTimeout=function(){r.error=r.xhr.response,r.status=r.xhr.status,r.onTimeout(r)},this.convert=function(e,t){return e},this.onSuccess=function(e,t){t.resolve(t)},this.onError=function(e,t,r){t.reject(t)},this.onAbort=function(e){e.reject(e)},this.onTimeout=function(e){e.reject(e)},this.xhr=new XMLHttpRequest,this.promise=new Promise(function(e,t){r.resolve=e,r.reject=t})};return r});
