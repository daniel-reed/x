!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.x=t()}(this,function(){"use strict";!function(){function e(e){this.value=e}function t(t){function n(o,s){try{var a=t[o](s),i=a.value;i instanceof e?Promise.resolve(i.value).then(function(e){n("next",e)},function(e){n("throw",e)}):r(a.done?"return":"normal",a.value)}catch(e){r("throw",e)}}function r(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}(o=o.next)?n(o.key,o.arg):s=null}var o,s;this._invoke=function(e,t){return new Promise(function(r,a){var i={key:e,arg:t,resolve:r,reject:a,next:null};s?s=s.next=i:(o=s=i,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}();var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),n=function(){function n(){e(this,n)}return t(n,null,[{key:"text",value:function(e,t){var o=new r,s={type:"POST",url:e};Object.assign(s,t),o.open(s),n.setTextHeaders(o,s),n.setHeaders(o,s),n.setFunctionOverrides(o,s);var a=s.hasOwnProperty("data")?s.data:void 0;o.send(a)}},{key:"json",value:function(e,t){var o=new r,s={type:"POST",url:e,responseType:"json"};Object.assign(s,t),o.open(s),n.setJSONHeaders(o,s),n.setHeaders(o,s),n.setFunctionOverrides(o,s);var a=s.hasOwnProperty("data")?JSON.stringify(s.data):void 0;o.send(a)}},{key:"proto",value:function(e,t){var o=new r,s={type:"POST",url:e,responseType:"json"};Object.assign(s,t),o.open(s),n.setProtoHeaders(o,s),n.setHeaders(o,s),n.setFunctionOverrides(o,s),n.setProtoConvert(o,s);var a=void 0;s.hasOwnProperty("data")&&s.data.hasOwnProperty("serializeBinary")&&(a=s.data.serializeBinary()),o.send(a)}},{key:"setJSONHeaders",value:function(e,t){n.setXRequestedWithHeader(e,t),e.setHeader("Content-Type","application/json")}},{key:"setTextHeaders",value:function(e,t){n.setXRequestedWithHeader(e,t),e.setHeader("Content-Type","text/plain")}},{key:"setProtoHeaders",value:function(e,t){n.setXRequestedWithHeader(e,t),e.setHeader("Content-Type","application/octet-stream")}},{key:"setXRequestedWithHeader",value:function(e,t){t.hasOwnProperty("requestedWith")&&!t.requestedWith||e.setHeader("X-Requested-With","XMLHttpRequest")}},{key:"setHeaders",value:function(e,t){if(!t.hasOwnProperty("headers"))for(var n in t.headers)t.headers.hasOwnProperty(n)&&e.setHeader(n,t.headers[n])}},{key:"setFunctionOverrides",value:function(e,t){t.hasOwnProperty("convert")&&(e.convert=t.convert),t.hasOwnProperty("success")&&(e.success=t.success),t.hasOwnProperty("error")&&(e.error=t.error),t.hasOwnProperty("aborted")&&(e.aborted=t.aborted),t.hasOwnProperty("timeout")&&(e.timeout=t.timeout)}},{key:"setProtoConvert",value:function(e,t){t.hasOwnProperty("proto")&&(e.convert=n.buildProtoConvert(t.proto))}},{key:"isPending",value:function(e){return null!==e&&(void 0!==e&&(!!e.hasOwnProperty("isPending")&&e.isPending()))}},{key:"abort",value:function(e){if(null!==e&&void 0!==e&&e.hasOwnProperty("abort"))return e.abort()}},{key:"buildProtoConvert",value:function(e){return function(t,n){return e.deserializeBinary(t)}}}]),n}(),r=function t(){var n=this;e(this,t),this.open=function(e){if(!e.hasOwnProperty("url"))throw"Missing 'url' Parameter";var t=e.hasOwnProperty("type")?e.type:"GET";n.xhr.open(t,e.url),e.hasOwnProperty("responseType")&&(n.xhr.responseType=e.responseType),n.xhr.onreadystatechange=n.__handleReadyStateChange,e.hasOwnProperty("timeout")&&(n.xhr.timeout=e.timeout,n.xhr.ontimeout=n.__handleTimeout())},this.isPending=function(){switch(n.xhr.readyState){case 0:case 4:return!1;default:return!0}},this.setHeader=function(e,t){n.xhr.setRequestHeader(e,t)},this.send=function(e){return void 0===e?n.xhr.send():n.xhr.send(e)},this.abort=function(){if(4!==n.xhr.readyState&&0!==n.xhr.readyState)return n.xhr.abort()},this.__handleReadyStateChange=function(){switch(n.xhr.readyState){case XMLHttpRequest.DONE:return n.__handleDone()}},this.__handleDone=function(){return 200===n.xhr.status?n.__handleSuccess():0===n.xhr.status?n.__handleAborted():n.__handleError()},this.__handleSuccess=function(){switch(n.xhr.responseType){case"json":n.success(n.convert(n.xhr.response),n);break;default:n.success(n.convert(n.xhr.responseText),n)}},this.__handleError=function(){n.error(n.xhr.response,n,n.xhr.status)},this.__handleAborted=function(){n.aborted(n)},this.__handleTimeout=function(){n.timeout(n)},this.convert=function(e,t){return e},this.success=function(e,t){},this.error=function(e,t,n){},this.aborted=function(e){},this.timeout=function(e){},this.xhr=new XMLHttpRequest};return n});
